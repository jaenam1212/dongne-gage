{
    "sourceFile": "lib/datetime-kst.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1770985090528,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1770985090528,
            "name": "Commit-0",
            "content": "/** 한국 시간(Asia/Seoul, KST UTC+9) 기준 날짜/시간 유틸 */\n\nconst TZ = 'Asia/Seoul'\n\n/** 오늘 날짜를 KST 기준 YYYY-MM-DD */\nexport function getTodayKST(): string {\n  return new Date().toLocaleDateString('en-CA', { timeZone: TZ })\n}\n\n/** 현재 시각을 KST 기준 datetime-local 값(YYYY-MM-DDTHH:mm) */\nexport function getNowKSTDateTimeLocal(): string {\n  const s = new Date().toLocaleString('sv-SE', { timeZone: TZ })\n  const [datePart, timePart] = s.split(' ')\n  if (!datePart || !timePart) return getTodayKST() + 'T00:00'\n  const [h, m] = timePart.split(':')\n  return `${datePart}T${h}:${m}`\n}\n\n/** KST 날짜(YYYY-MM-DD)의 00:00:00을 UTC ISO로 */\nexport function getKSTDayStartUTC(kstDate: string): string {\n  const d = new Date(kstDate + 'T00:00:00+09:00')\n  return d.toISOString()\n}\n\n/** KST 날짜(YYYY-MM-DD)의 다음날 00:00:00을 UTC ISO로 (해당일 포함 범위 끝) */\nexport function getKSTDayEndExclusiveUTC(kstDate: string): string {\n  const start = new Date(kstDate + 'T00:00:00+09:00')\n  const next = new Date(start.getTime() + 24 * 60 * 60 * 1000)\n  const nextStr = next.toLocaleDateString('en-CA', { timeZone: TZ })\n  return getKSTDayStartUTC(nextStr)\n}\n\n/** ISO UTC 문자열을 KST 기준 datetime-local 값(YYYY-MM-DDTHH:mm)으로 */\nexport function toKSTDateTimeLocal(isoUtc: string | null): string {\n  if (!isoUtc) return ''\n  try {\n    const d = new Date(isoUtc)\n    const s = d.toLocaleString('sv-SE', { timeZone: TZ })\n    const [datePart, timePart] = s.split(' ')\n    if (!datePart || !timePart) return ''\n    const [h, m] = timePart.split(':')\n    return `${datePart}T${h}:${m}`\n  } catch {\n    return ''\n  }\n}\n\n/** KST로 해석되는 datetime-local 값(YYYY-MM-DDTHH:mm)을 ISO UTC로 */\nexport function fromKSTToISOUTC(kstDateTimeLocal: string): string {\n  if (!kstDateTimeLocal || !kstDateTimeLocal.includes('T')) return kstDateTimeLocal\n  const d = new Date(kstDateTimeLocal + '+09:00')\n  return d.toISOString()\n}\n\n/** ISO UTC → KST 날짜만 YYYY-MM-DD (폼 date input용) */\nexport function toKSTDateOnly(isoUtc: string | null): string {\n  if (!isoUtc) return ''\n  try {\n    return new Date(isoUtc).toLocaleDateString('en-CA', { timeZone: TZ })\n  } catch {\n    return ''\n  }\n}\n\n/** ISO UTC → KST 시간만 HH:mm (폼 time input용). 23:59면 '' 반환(날짜만 선택한 경우) */\nexport function toKSTTimeOnly(isoUtc: string | null): string {\n  if (!isoUtc) return ''\n  try {\n    const d = new Date(isoUtc)\n    const h = d.toLocaleString('en-CA', { timeZone: TZ, hour: '2-digit', hour12: false })\n    const m = d.toLocaleString('en-CA', { timeZone: TZ, minute: '2-digit' })\n    const t = `${h.padStart(2, '0')}:${m.padStart(2, '0')}`\n    return t === '23:59' ? '' : t\n  } catch {\n    return ''\n  }\n}\n\n/** 날짜(YYYY-MM-DD) + 시간(HH:mm, 빈 값 가능) → KST로 해석해 ISO UTC */\nexport function fromKSTDateAndTimeToISOUTC(dateStr: string, timeStr: string): string {\n  if (!dateStr) return ''\n  const time = (timeStr || '').trim() || '23:59'\n  return fromKSTToISOUTC(`${dateStr}T${time}`)\n}\n\n/** ISO UTC를 KST datetime-local로 해석해 Date로 (비교용) */\nexport function parseUTC(isoUtc: string | null): Date | null {\n  if (!isoUtc) return null\n  const d = new Date(isoUtc)\n  return isNaN(d.getTime()) ? null : d\n}\n\n/** KST 기준 날짜만 표시 (예: 2025. 2. 15) */\nexport function formatDateKST(isoString: string | null): string {\n  if (!isoString) return ''\n  try {\n    return new Date(isoString).toLocaleDateString('ko-KR', { timeZone: TZ })\n  } catch {\n    return ''\n  }\n}\n\n/** KST 기준 월/일 시:분 (예: 2/15 14:00) */\nexport function formatDateTimeKST(isoString: string | null): string {\n  if (!isoString) return ''\n  try {\n    const d = new Date(isoString)\n    const month = d.toLocaleString('ko-KR', { timeZone: TZ, month: 'numeric' })\n    const day = d.toLocaleString('ko-KR', { timeZone: TZ, day: 'numeric' })\n    const hour = d.toLocaleString('ko-KR', { timeZone: TZ, hour: '2-digit', hour12: false })\n    const minute = d.toLocaleString('ko-KR', { timeZone: TZ, minute: '2-digit' })\n    return `${month}/${day} ${hour.padStart(2, '0')}:${minute.padStart(2, '0')}`\n  } catch {\n    return ''\n  }\n}\n\n/** KST 기준 월/일만 (예: 2/15) */\nexport function formatMonthDayKST(isoString: string | null): string {\n  if (!isoString) return ''\n  try {\n    const d = new Date(isoString)\n    const month = d.toLocaleString('ko-KR', { timeZone: TZ, month: 'numeric' })\n    const day = d.toLocaleString('ko-KR', { timeZone: TZ, day: 'numeric' })\n    return `${month}/${day}`\n  } catch {\n    return ''\n  }\n}\n"
        }
    ]
}