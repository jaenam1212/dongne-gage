{
    "sourceFile": "app/my-orders/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1770983887999,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1770983938545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,105 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import Link from 'next/link'\n+import { ArrowLeft, Package } from 'lucide-react'\n+import { formatKoreanWon } from '@/lib/utils'\n+import { getMyOrders, type StoredOrder } from '@/lib/my-orders-storage'\n+\n+const STATUS_LABELS: Record<StoredOrder['status'], string> = {\n+  pending: '대기중',\n+  confirmed: '확인됨',\n+  cancelled: '취소됨',\n+  completed: '완료',\n+}\n+\n+const STATUS_STYLES: Record<StoredOrder['status'], string> = {\n+  pending: 'bg-yellow-50 text-yellow-700 border-yellow-200',\n+  confirmed: 'bg-green-50 text-green-700 border-green-200',\n+  cancelled: 'bg-red-50 text-red-700 border-red-200',\n+  completed: 'bg-stone-100 text-stone-600 border-stone-200',\n+}\n+\n+function formatDate(dateString: string): string {\n+  const d = new Date(dateString)\n+  return `${d.getFullYear()}. ${d.getMonth() + 1}. ${d.getDate()}`\n+}\n+\n+export default function MyOrdersPage() {\n+  const [orders, setOrders] = useState<StoredOrder[]>([])\n+  const [mounted, setMounted] = useState(false)\n+\n+  useEffect(() => {\n+    setOrders(getMyOrders())\n+    setMounted(true)\n+  }, [])\n+\n+  return (\n+    <div className=\"min-h-dvh bg-stone-50\">\n+      <header className=\"sticky top-0 z-20 flex h-14 items-center gap-3 border-b border-stone-200 bg-white/80 backdrop-blur-lg px-4\">\n+        <button\n+          type=\"button\"\n+          onClick={() => window.history.back()}\n+          className=\"flex h-9 w-9 items-center justify-center rounded-xl border border-stone-200 bg-white text-stone-500 hover:bg-stone-50 hover:text-stone-700 transition-colors min-h-[44px] min-w-[44px]\"\n+          aria-label=\"뒤로 가기\"\n+        >\n+          <ArrowLeft className=\"h-4 w-4\" />\n+        </button>\n+        <h1 className=\"text-lg font-bold text-stone-900\">내 주문 내역</h1>\n+      </header>\n+\n+      <main className=\"mx-auto max-w-md px-4 py-6\">\n+        {!mounted ? (\n+          <div className=\"rounded-2xl border border-stone-200 bg-white py-12 text-center\">\n+            <p className=\"text-sm text-stone-400\">불러오는 중...</p>\n+          </div>\n+        ) : orders.length === 0 ? (\n+          <div className=\"rounded-2xl border border-stone-200 bg-white py-16 text-center shadow-sm\">\n+            <Package className=\"mx-auto h-12 w-12 text-stone-300\" />\n+            <p className=\"mt-3 text-sm text-stone-500\">저장된 주문 내역이 없습니다</p>\n+            <p className=\"mt-1 text-xs text-stone-400\">\n+              예약 완료 시 이 기기에 자동으로 저장됩니다\n+            </p>\n+            <Link\n+              href=\"/\"\n+              className=\"mt-5 inline-block rounded-xl bg-stone-900 px-5 py-2.5 text-sm font-semibold text-white hover:bg-stone-800 transition-colors\"\n+            >\n+              가게 찾아보기\n+            </Link>\n+          </div>\n+        ) : (\n+          <div className=\"space-y-3\">\n+            {orders.map((order) => (\n+              <Link\n+                key={order.id}\n+                href={`/${order.shop_slug}`}\n+                className=\"block rounded-2xl border border-stone-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md\"\n+              >\n+                <div className=\"flex items-start justify-between gap-3\">\n+                  <div className=\"min-w-0 flex-1\">\n+                    <p className=\"text-xs text-stone-400\">{order.shop_name}</p>\n+                    <h3 className=\"mt-0.5 text-sm font-semibold text-stone-900 truncate\">\n+                      {order.product_title}\n+                    </h3>\n+                    <p className=\"mt-1 text-base font-bold text-stone-800\">\n+                      {formatKoreanWon(order.total_price)}\n+                    </p>\n+                    <p className=\"mt-1 text-xs text-stone-500\">\n+                      {order.quantity}개 · 예약일 {formatDate(order.created_at)}\n+                      {order.pickup_date && ` · 픽업 ${formatDate(order.pickup_date)}`}\n+                    </p>\n+                  </div>\n+                  <span\n+                    className={`shrink-0 rounded-md px-2 py-1 text-[11px] font-medium border ${STATUS_STYLES[order.status]}`}\n+                  >\n+                    {STATUS_LABELS[order.status]}\n+                  </span>\n+                </div>\n+              </Link>\n+            ))}\n+          </div>\n+        )}\n+      </main>\n+    </div>\n+  )\n+}\n"
                },
                {
                    "date": 1770984066217,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n 'use client'\n \n import { useState, useEffect } from 'react'\n import Link from 'next/link'\n+import { useRouter, useSearchParams } from 'next/navigation'\n import { ArrowLeft, Package } from 'lucide-react'\n import { formatKoreanWon } from '@/lib/utils'\n import { getMyOrders, type StoredOrder } from '@/lib/my-orders-storage'\n \n@@ -25,22 +26,33 @@\n   return `${d.getFullYear()}. ${d.getMonth() + 1}. ${d.getDate()}`\n }\n \n export default function MyOrdersPage() {\n+  const router = useRouter()\n+  const searchParams = useSearchParams()\n+  const returnTo = searchParams.get('returnTo') // 주문 완료에서 왔을 때 상점 slug\n   const [orders, setOrders] = useState<StoredOrder[]>([])\n   const [mounted, setMounted] = useState(false)\n \n   useEffect(() => {\n     setOrders(getMyOrders())\n     setMounted(true)\n   }, [])\n \n+  function handleBack() {\n+    if (returnTo) {\n+      router.push(`/${returnTo}`)\n+    } else {\n+      window.history.back()\n+    }\n+  }\n+\n   return (\n     <div className=\"min-h-dvh bg-stone-50\">\n       <header className=\"sticky top-0 z-20 flex h-14 items-center gap-3 border-b border-stone-200 bg-white/80 backdrop-blur-lg px-4\">\n         <button\n           type=\"button\"\n-          onClick={() => window.history.back()}\n+          onClick={handleBack}\n           className=\"flex h-9 w-9 items-center justify-center rounded-xl border border-stone-200 bg-white text-stone-500 hover:bg-stone-50 hover:text-stone-700 transition-colors min-h-[44px] min-w-[44px]\"\n           aria-label=\"뒤로 가기\"\n         >\n           <ArrowLeft className=\"h-4 w-4\" />\n@@ -102,107 +114,4 @@\n       </main>\n     </div>\n   )\n }\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import Link from 'next/link'\n-import { ArrowLeft, Package } from 'lucide-react'\n-import { formatKoreanWon } from '@/lib/utils'\n-import { getMyOrders, type StoredOrder } from '@/lib/my-orders-storage'\n-\n-const STATUS_LABELS: Record<StoredOrder['status'], string> = {\n-  pending: '대기중',\n-  confirmed: '확인됨',\n-  cancelled: '취소됨',\n-  completed: '완료',\n-}\n-\n-const STATUS_STYLES: Record<StoredOrder['status'], string> = {\n-  pending: 'bg-yellow-50 text-yellow-700 border-yellow-200',\n-  confirmed: 'bg-green-50 text-green-700 border-green-200',\n-  cancelled: 'bg-red-50 text-red-700 border-red-200',\n-  completed: 'bg-stone-100 text-stone-600 border-stone-200',\n-}\n-\n-function formatDate(dateString: string): string {\n-  const d = new Date(dateString)\n-  return `${d.getFullYear()}. ${d.getMonth() + 1}. ${d.getDate()}`\n-}\n-\n-export default function MyOrdersPage() {\n-  const [orders, setOrders] = useState<StoredOrder[]>([])\n-  const [mounted, setMounted] = useState(false)\n-\n-  useEffect(() => {\n-    setOrders(getMyOrders())\n-    setMounted(true)\n-  }, [])\n-\n-  return (\n-    <div className=\"min-h-dvh bg-stone-50\">\n-      <header className=\"sticky top-0 z-20 flex h-14 items-center gap-3 border-b border-stone-200 bg-white/80 backdrop-blur-lg px-4\">\n-        <Link\n-          href=\"/\"\n-          className=\"flex h-9 w-9 items-center justify-center rounded-xl border border-stone-200 bg-white text-stone-500 hover:bg-stone-50 hover:text-stone-700 transition-colors min-h-[44px] min-w-[44px]\"\n-        >\n-          <ArrowLeft className=\"h-4 w-4\" />\n-        </Link>\n-        <h1 className=\"text-lg font-bold text-stone-900\">내 주문 내역</h1>\n-      </header>\n-\n-      <main className=\"mx-auto max-w-md px-4 py-6\">\n-        {!mounted ? (\n-          <div className=\"rounded-2xl border border-stone-200 bg-white py-12 text-center\">\n-            <p className=\"text-sm text-stone-400\">불러오는 중...</p>\n-          </div>\n-        ) : orders.length === 0 ? (\n-          <div className=\"rounded-2xl border border-stone-200 bg-white py-16 text-center shadow-sm\">\n-            <Package className=\"mx-auto h-12 w-12 text-stone-300\" />\n-            <p className=\"mt-3 text-sm text-stone-500\">저장된 주문 내역이 없습니다</p>\n-            <p className=\"mt-1 text-xs text-stone-400\">\n-              예약 완료 시 이 기기에 자동으로 저장됩니다\n-            </p>\n-            <Link\n-              href=\"/\"\n-              className=\"mt-5 inline-block rounded-xl bg-stone-900 px-5 py-2.5 text-sm font-semibold text-white hover:bg-stone-800 transition-colors\"\n-            >\n-              가게 찾아보기\n-            </Link>\n-          </div>\n-        ) : (\n-          <div className=\"space-y-3\">\n-            {orders.map((order) => (\n-              <Link\n-                key={order.id}\n-                href={`/${order.shop_slug}`}\n-                className=\"block rounded-2xl border border-stone-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md\"\n-              >\n-                <div className=\"flex items-start justify-between gap-3\">\n-                  <div className=\"min-w-0 flex-1\">\n-                    <p className=\"text-xs text-stone-400\">{order.shop_name}</p>\n-                    <h3 className=\"mt-0.5 text-sm font-semibold text-stone-900 truncate\">\n-                      {order.product_title}\n-                    </h3>\n-                    <p className=\"mt-1 text-base font-bold text-stone-800\">\n-                      {formatKoreanWon(order.total_price)}\n-                    </p>\n-                    <p className=\"mt-1 text-xs text-stone-500\">\n-                      {order.quantity}개 · 예약일 {formatDate(order.created_at)}\n-                      {order.pickup_date && ` · 픽업 ${formatDate(order.pickup_date)}`}\n-                    </p>\n-                  </div>\n-                  <span\n-                    className={`shrink-0 rounded-md px-2 py-1 text-[11px] font-medium border ${STATUS_STYLES[order.status]}`}\n-                  >\n-                    {STATUS_LABELS[order.status]}\n-                  </span>\n-                </div>\n-              </Link>\n-            ))}\n-          </div>\n-        )}\n-      </main>\n-    </div>\n-  )\n-}\n"
                },
                {
                    "date": 1770984092329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,10 +33,13 @@\n   const [orders, setOrders] = useState<StoredOrder[]>([])\n   const [mounted, setMounted] = useState(false)\n \n   useEffect(() => {\n-    setOrders(getMyOrders())\n-    setMounted(true)\n+    const id = requestAnimationFrame(() => {\n+      setOrders(getMyOrders())\n+      setMounted(true)\n+    })\n+    return () => cancelAnimationFrame(id)\n   }, [])\n \n   function handleBack() {\n     if (returnTo) {\n"
                }
            ],
            "date": 1770983887999,
            "name": "Commit-0",
            "content": "'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { ArrowLeft, Package } from 'lucide-react'\nimport { formatKoreanWon } from '@/lib/utils'\nimport { getMyOrders, type StoredOrder } from '@/lib/my-orders-storage'\n\nconst STATUS_LABELS: Record<StoredOrder['status'], string> = {\n  pending: '대기중',\n  confirmed: '확인됨',\n  cancelled: '취소됨',\n  completed: '완료',\n}\n\nconst STATUS_STYLES: Record<StoredOrder['status'], string> = {\n  pending: 'bg-yellow-50 text-yellow-700 border-yellow-200',\n  confirmed: 'bg-green-50 text-green-700 border-green-200',\n  cancelled: 'bg-red-50 text-red-700 border-red-200',\n  completed: 'bg-stone-100 text-stone-600 border-stone-200',\n}\n\nfunction formatDate(dateString: string): string {\n  const d = new Date(dateString)\n  return `${d.getFullYear()}. ${d.getMonth() + 1}. ${d.getDate()}`\n}\n\nexport default function MyOrdersPage() {\n  const [orders, setOrders] = useState<StoredOrder[]>([])\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setOrders(getMyOrders())\n    setMounted(true)\n  }, [])\n\n  return (\n    <div className=\"min-h-dvh bg-stone-50\">\n      <header className=\"sticky top-0 z-20 flex h-14 items-center gap-3 border-b border-stone-200 bg-white/80 backdrop-blur-lg px-4\">\n        <Link\n          href=\"/\"\n          className=\"flex h-9 w-9 items-center justify-center rounded-xl border border-stone-200 bg-white text-stone-500 hover:bg-stone-50 hover:text-stone-700 transition-colors min-h-[44px] min-w-[44px]\"\n        >\n          <ArrowLeft className=\"h-4 w-4\" />\n        </Link>\n        <h1 className=\"text-lg font-bold text-stone-900\">내 주문 내역</h1>\n      </header>\n\n      <main className=\"mx-auto max-w-md px-4 py-6\">\n        {!mounted ? (\n          <div className=\"rounded-2xl border border-stone-200 bg-white py-12 text-center\">\n            <p className=\"text-sm text-stone-400\">불러오는 중...</p>\n          </div>\n        ) : orders.length === 0 ? (\n          <div className=\"rounded-2xl border border-stone-200 bg-white py-16 text-center shadow-sm\">\n            <Package className=\"mx-auto h-12 w-12 text-stone-300\" />\n            <p className=\"mt-3 text-sm text-stone-500\">저장된 주문 내역이 없습니다</p>\n            <p className=\"mt-1 text-xs text-stone-400\">\n              예약 완료 시 이 기기에 자동으로 저장됩니다\n            </p>\n            <Link\n              href=\"/\"\n              className=\"mt-5 inline-block rounded-xl bg-stone-900 px-5 py-2.5 text-sm font-semibold text-white hover:bg-stone-800 transition-colors\"\n            >\n              가게 찾아보기\n            </Link>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {orders.map((order) => (\n              <Link\n                key={order.id}\n                href={`/${order.shop_slug}`}\n                className=\"block rounded-2xl border border-stone-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md\"\n              >\n                <div className=\"flex items-start justify-between gap-3\">\n                  <div className=\"min-w-0 flex-1\">\n                    <p className=\"text-xs text-stone-400\">{order.shop_name}</p>\n                    <h3 className=\"mt-0.5 text-sm font-semibold text-stone-900 truncate\">\n                      {order.product_title}\n                    </h3>\n                    <p className=\"mt-1 text-base font-bold text-stone-800\">\n                      {formatKoreanWon(order.total_price)}\n                    </p>\n                    <p className=\"mt-1 text-xs text-stone-500\">\n                      {order.quantity}개 · 예약일 {formatDate(order.created_at)}\n                      {order.pickup_date && ` · 픽업 ${formatDate(order.pickup_date)}`}\n                    </p>\n                  </div>\n                  <span\n                    className={`shrink-0 rounded-md px-2 py-1 text-[11px] font-medium border ${STATUS_STYLES[order.status]}`}\n                  >\n                    {STATUS_LABELS[order.status]}\n                  </span>\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  )\n}\n"
        }
    ]
}