{
    "sourceFile": "components/ui/date-picker.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1770985534711,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1770985534711,
            "name": "Commit-0",
            "content": "'use client'\n\nimport * as React from 'react'\nimport { DayPicker } from 'react-day-picker'\nimport { ko } from 'react-day-picker/locale'\nimport { Calendar } from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\ntype DatePickerProps = {\n  name: string\n  defaultValue?: string\n  min?: string\n  placeholder?: string\n  className?: string\n  inputClassName?: string\n}\n\nfunction toDate(str: string): Date | undefined {\n  if (!str) return undefined\n  const d = new Date(str + 'T12:00:00')\n  return isNaN(d.getTime()) ? undefined : d\n}\n\nfunction toYYYYMMDD(d: Date): string {\n  const y = d.getFullYear()\n  const m = String(d.getMonth() + 1).padStart(2, '0')\n  const day = String(d.getDate()).padStart(2, '0')\n  return `${y}-${m}-${day}`\n}\n\nexport function DatePicker({\n  name,\n  defaultValue = '',\n  min,\n  placeholder = '날짜 선택',\n  className,\n  inputClassName,\n}: DatePickerProps) {\n  const [open, setOpen] = React.useState(false)\n  const [value, setValue] = React.useState(defaultValue)\n  const containerRef = React.useRef<HTMLDivElement>(null)\n\n  const selected = value ? toDate(value) : undefined\n  const minDate = min ? toDate(min) : undefined\n\n  React.useEffect(() => {\n    if (!open) return\n    function handleClick(e: MouseEvent) {\n      if (containerRef.current && !containerRef.current.contains(e.target as Node)) {\n        setOpen(false)\n      }\n    }\n    document.addEventListener('mousedown', handleClick)\n    return () => document.removeEventListener('mousedown', handleClick)\n  }, [open])\n\n  const displayText = value\n    ? toDate(value)?.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })\n    : placeholder\n\n  return (\n    <div ref={containerRef} className={cn('relative', className)}>\n      <input type=\"hidden\" name={name} value={value} readOnly />\n      <button\n        type=\"button\"\n        onClick={() => setOpen((o) => !o)}\n        className={cn(\n          'flex h-9 w-full items-center gap-2 rounded-md border border-stone-200 bg-stone-50 px-3 py-1 text-left text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:border-stone-400 focus-visible:ring-[3px] focus-visible:ring-stone-400/30 md:text-sm',\n          !value && 'text-stone-400',\n          inputClassName\n        )}\n      >\n        <Calendar className=\"h-4 w-4 shrink-0 text-stone-400\" />\n        <span className=\"truncate\">{displayText}</span>\n      </button>\n      {open && (\n        <div className=\"absolute left-0 top-full z-50 mt-1 rounded-xl border border-stone-200 bg-white p-3 shadow-lg\">\n          <DayPicker\n            mode=\"single\"\n            locale={ko}\n            selected={selected}\n            onSelect={(date) => {\n              if (date) {\n                setValue(toYYYYMMDD(date))\n                setOpen(false)\n              }\n            }}\n            disabled={minDate ? { before: minDate } : undefined}\n            defaultMonth={selected ?? minDate ?? new Date()}\n            classNames={{\n              root: 'p-0',\n              months: 'flex flex-col',\n              month: 'flex flex-col gap-3',\n              month_caption: 'flex items-center justify-between h-9 px-1',\n              caption_label: 'text-sm font-semibold text-stone-900',\n              nav: 'flex items-center gap-1',\n              button_previous: 'h-8 w-8 rounded-lg border border-stone-200 bg-white hover:bg-stone-50 inline-flex items-center justify-center text-stone-600',\n              button_next: 'h-8 w-8 rounded-lg border border-stone-200 bg-white hover:bg-stone-50 inline-flex items-center justify-center text-stone-600',\n              month_grid: 'w-full',\n              weekdays: 'flex',\n              weekday: 'w-9 flex items-center justify-center text-[11px] font-medium text-stone-500',\n              weeks: 'flex flex-col gap-0.5',\n              week: 'flex',\n              day: 'w-9 h-9 flex items-center justify-center p-0',\n              day_button:\n                'h-9 w-9 rounded-lg text-sm font-medium text-stone-700 hover:bg-stone-100 focus:bg-stone-100 outline-none disabled:opacity-40 disabled:pointer-events-none',\n              selected: '!bg-stone-900 !text-white hover:!bg-stone-800 focus:!bg-stone-800',\n              today: 'font-semibold text-stone-900',\n              outside: 'text-stone-300',\n              disabled: 'opacity-40 cursor-not-allowed',\n            }}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n"
        }
    ]
}